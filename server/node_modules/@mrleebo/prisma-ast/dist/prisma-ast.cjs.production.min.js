"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("chevrotain"),t=require("lilconfig"),n=require("os"),r=e.createToken({name:"Identifier",pattern:/[a-zA-Z]\w*/}),a=e.createToken({name:"Datasource",pattern:/datasource/,push_mode:"block"}),i=e.createToken({name:"Generator",pattern:/generator/,push_mode:"block"}),u=e.createToken({name:"Model",pattern:/model/,push_mode:"block"}),o=e.createToken({name:"View",pattern:/view/,push_mode:"block"}),s=e.createToken({name:"Enum",pattern:/enum/,push_mode:"block"}),c=e.createToken({name:"True",pattern:/true/,longer_alt:r}),m=e.createToken({name:"False",pattern:/false/,longer_alt:r}),l=e.createToken({name:"Null",pattern:/null/,longer_alt:r}),p=e.createToken({name:"Comment",pattern:e.Lexer.NA}),f=e.createToken({name:"DocComment",pattern:/\/\/\/\s*(.+)/,categories:[p]}),L=e.createToken({name:"LineComment",pattern:/\/\/\s*(.+)/,categories:[p]}),d=e.createToken({name:"Attribute",pattern:e.Lexer.NA}),v=e.createToken({name:"BlockAttribute",pattern:/@@/,label:"'@@'",categories:[d]}),y=e.createToken({name:"FieldAttribute",pattern:/@/,label:"'@'",categories:[d]}),E=e.createToken({name:"Dot",pattern:/\./,label:"'.'"}),h=e.createToken({name:"QuestionMark",pattern:/\?/,label:"'?'"}),b=e.createToken({name:"LCurly",pattern:/{/,label:"'{'"}),g=e.createToken({name:"RCurly",pattern:/}/,label:"'}'",pop_mode:!0}),A=e.createToken({name:"LRound",pattern:/\(/,label:"'('"}),U=e.createToken({name:"RRound",pattern:/\)/,label:"')'"}),k=e.createToken({name:"LSquare",pattern:/\[/,label:"'['"}),S=e.createToken({name:"RSquare",pattern:/\]/,label:"']'"}),O=e.createToken({name:"Comma",pattern:/,/,label:"','"}),T=e.createToken({name:"Colon",pattern:/:/,label:"':'"}),B=e.createToken({name:"Equals",pattern:/=/,label:"'='"}),N=e.createToken({name:"StringLiteral",pattern:/"(:?[^\\"\n\r]|\\(:?[bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/}),C=e.createToken({name:"NumberLiteral",pattern:/-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/}),w=e.createToken({name:"WhiteSpace",pattern:/\s+/,group:e.Lexer.SKIPPED}),M=e.createToken({name:"LineBreak",pattern:/\n|\r\n/,line_breaks:!0,label:"LineBreak"}),j=[p,f,L,M,w],R={modes:{global:[].concat(j,[a,i,u,o,s]),block:[].concat(j,[d,v,y,E,h,b,g,k,S,A,U,O,T,B,c,m,l,N,C,r])},defaultMode:"global"},_=new e.Lexer(R);function x(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,P(e,t)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}var I,V={parser:{nodeLocationTracking:"none"}};function D(){if(null!=I)return I;var e=t.lilconfigSync("prisma-ast").search();return I=Object.assign(V,null==e?void 0:e.config)}var F=new(function(e){function t(){var t;return(t=e.call(this,R,D().parser)||this).break=t.RULE("break",(function(){t.CONSUME1(M),t.CONSUME2(M)})),t.keyedArg=t.RULE("keyedArg",(function(){t.CONSUME(r,{LABEL:"keyName"}),t.CONSUME(T),t.SUBRULE(t.value)})),t.array=t.RULE("array",(function(){t.CONSUME(k),t.MANY_SEP({SEP:O,DEF:function(){t.SUBRULE(t.value)}}),t.CONSUME(S)})),t.func=t.RULE("func",(function(){t.CONSUME(r,{LABEL:"funcName"}),t.CONSUME(A),t.MANY_SEP({SEP:O,DEF:function(){t.OR([{ALT:function(){return t.SUBRULE(t.keyedArg)}},{ALT:function(){return t.SUBRULE(t.value)}}])}}),t.CONSUME(U)})),t.value=t.RULE("value",(function(){t.OR([{ALT:function(){return t.CONSUME(N,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(C,{LABEL:"value"})}},{ALT:function(){return t.SUBRULE(t.array,{LABEL:"value"})}},{ALT:function(){return t.SUBRULE(t.func,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(c,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(m,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(l,{LABEL:"value"})}},{ALT:function(){return t.CONSUME(r,{LABEL:"value"})}}])})),t.property=t.RULE("property",(function(){t.CONSUME(r,{LABEL:"propertyName"}),t.CONSUME(B),t.SUBRULE(t.value,{LABEL:"propertyValue"})})),t.assignment=t.RULE("assignment",(function(){t.CONSUME(r,{LABEL:"assignmentName"}),t.CONSUME(B),t.SUBRULE(t.value,{LABEL:"assignmentValue"})})),t.field=t.RULE("field",(function(){t.CONSUME(r,{LABEL:"fieldName"}),t.SUBRULE(t.value,{LABEL:"fieldType"}),t.OPTION1((function(){t.OR([{ALT:function(){t.CONSUME(k,{LABEL:"array"}),t.CONSUME(S,{LABEL:"array"})}},{ALT:function(){return t.CONSUME(h,{LABEL:"optional"})}}])})),t.MANY((function(){t.SUBRULE(t.attribute,{LABEL:"attributeList"})})),t.OPTION2((function(){t.CONSUME(p,{LABEL:"comment"})}))})),t.block=t.RULE("block",(function(e){void 0===e&&(e={});var n=e.componentType,r="enum"===n,a="model"===n||"view"===n;t.CONSUME(b),t.CONSUME1(M),t.MANY((function(){t.OR([{ALT:function(){return t.SUBRULE(t.comment,{LABEL:"list"})}},{GATE:function(){return a},ALT:function(){return t.SUBRULE(t.property,{LABEL:"list"})}},{ALT:function(){return t.SUBRULE(t.attribute,{LABEL:"list"})}},{GATE:function(){return a},ALT:function(){return t.SUBRULE(t.field,{LABEL:"list"})}},{GATE:function(){return r},ALT:function(){return t.SUBRULE(t.enum,{LABEL:"list"})}},{GATE:function(){return!a},ALT:function(){return t.SUBRULE(t.assignment,{LABEL:"list"})}},{ALT:function(){return t.SUBRULE(t.break,{LABEL:"list"})}},{ALT:function(){return t.CONSUME2(M)}}])})),t.CONSUME(g)})),t.enum=t.RULE("enum",(function(){t.CONSUME(r,{LABEL:"enumName"}),t.OPTION((function(){t.CONSUME(p,{LABEL:"comment"})}))})),t.attribute=t.RULE("attribute",(function(){t.OR1([{ALT:function(){return t.CONSUME(v,{LABEL:"blockAttribute"})}},{ALT:function(){return t.CONSUME(y,{LABEL:"fieldAttribute"})}}]),t.OR2([{ALT:function(){t.CONSUME1(r,{LABEL:"groupName"}),t.CONSUME(E),t.CONSUME2(r,{LABEL:"attributeName"})}},{ALT:function(){return t.CONSUME(r,{LABEL:"attributeName"})}}]),t.OPTION((function(){t.CONSUME(A),t.MANY_SEP({SEP:O,DEF:function(){t.SUBRULE(t.attributeArg)}}),t.CONSUME(U)}))})),t.attributeArg=t.RULE("attributeArg",(function(){t.OR([{ALT:function(){return t.SUBRULE(t.keyedArg,{LABEL:"value"})}},{ALT:function(){return t.SUBRULE(t.value,{LABEL:"value"})}}])})),t.component=t.RULE("component",(function(){var e=t.OR1([{ALT:function(){return t.CONSUME(a,{LABEL:"type"})}},{ALT:function(){return t.CONSUME(i,{LABEL:"type"})}},{ALT:function(){return t.CONSUME(u,{LABEL:"type"})}},{ALT:function(){return t.CONSUME(o,{LABEL:"type"})}},{ALT:function(){return t.CONSUME(s,{LABEL:"type"})}}]);t.OR2([{ALT:function(){t.CONSUME1(r,{LABEL:"groupName"}),t.CONSUME(E),t.CONSUME2(r,{LABEL:"componentName"})}},{ALT:function(){return t.CONSUME(r,{LABEL:"componentName"})}}]),t.SUBRULE(t.block,{ARGS:[{componentType:e.image}]})})),t.comment=t.RULE("comment",(function(){t.CONSUME(p,{LABEL:"text"})})),t.schema=t.RULE("schema",(function(){t.MANY((function(){t.OR([{ALT:function(){return t.SUBRULE(t.comment,{LABEL:"list"})}},{ALT:function(){return t.SUBRULE(t.component,{LABEL:"list"})}},{ALT:function(){return t.SUBRULE(t.break,{LABEL:"list"})}},{ALT:function(){return t.CONSUME(M)}}])}))})),t.performSelfAnalysis(),t}return x(t,e),t}(e.CstParser)),q=["model","view"];function G(e){return null!=e&&"type"in e&&q.includes(e.type)}function Y(e){return null!=e&&"type"in e&&"field"===e.type}function z(e){if("none"===D().parser.nodeLocationTracking)return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.reduce((function(e,t){if(!t)return e;var n=e.endColumn,r=void 0===n?-Infinity:n,a=e.endLine,i=void 0===a?-Infinity:a,u=e.endOffset,o=void 0===u?-Infinity:u,s=e.startColumn,c=void 0===s?Infinity:s,m=e.startLine,l=e.startOffset,p=void 0===l?Infinity:l;return null!=t.startLine&&t.startLine<(void 0===m?Infinity:m)&&(e.startLine=t.startLine),null!=t.startColumn&&t.startColumn<c&&(e.startColumn=t.startColumn),null!=t.startOffset&&t.startOffset<p&&(e.startOffset=t.startOffset),null!=t.endLine&&t.endLine>i&&(e.endLine=t.endLine),null!=t.endColumn&&t.endColumn>r&&(e.endColumn=t.endColumn),null!=t.endOffset&&t.endOffset>o&&(e.endOffset=t.endOffset),e}),{});return Object.assign(e,{location:a})}var W=function(e){function t(){var t;return(t=e.call(this)||this).validateVisitor(),t}x(t,e);var n=t.prototype;return n.schema=function(e){var t,n=this;return{type:"schema",list:(null==(t=e.list)?void 0:t.map((function(e){return n.visit([e])})))||[]}},n.component=function(e){var t=e.type[0],n=e.componentName[0],r=this.visit(e.block);return z(function(){switch(t.image){case"datasource":return{type:"datasource",name:n.image,assignments:r};case"generator":return{type:"generator",name:n.image,assignments:r};case"model":return{type:"model",name:n.image,properties:r};case"view":return{type:"view",name:n.image,properties:r};case"enum":return{type:"enum",name:n.image,enumerators:r};default:throw new Error("Unexpected block type: "+t)}}(),t,n)},n.break=function(){return{type:"break"}},n.comment=function(e){var t=e.text[0];return z({type:"comment",text:t.image},t)},n.block=function(e){var t,n=this;return null==(t=e.list)?void 0:t.map((function(e){return n.visit([e])}))},n.assignment=function(e){var t=this.visit(e.assignmentValue),n=e.assignmentName[0];return z({type:"assignment",key:n.image,value:t},n)},n.field=function(e){var t,n,r,a=this,i=this.visit(e.fieldType),u=e.fieldName[0],o=e.attributeList&&e.attributeList.map((function(e){return a.visit([e])})),s=null==(t=e.comment)||null==(t=t[0])?void 0:t.image;return z({type:"field",name:u.image,fieldType:i,array:null!=e.array,optional:null!=e.optional,attributes:o,comment:s},u,null==(n=e.optional)?void 0:n[0],null==(r=e.array)?void 0:r[0])},n.attribute=function(e){var t=this,n=e.attributeName[0],r=(e.groupName||[{}])[0],a=e.attributeArg&&e.attributeArg.map((function(e){return t.visit(e)})),i=null!=e.blockAttribute?"object":"field";return z.apply(void 0,[{type:"attribute",name:n.image,kind:i,group:r.image,args:a},n].concat("object"===i?e.blockAttribute:e.fieldAttribute,[r]))},n.attributeArg=function(e){return{type:"attributeArgument",value:this.visit(e.value)}},n.func=function(e){var t=this,n=e.funcName[0],r=e.value&&e.value.map((function(e){return t.visit([e])})),a=e.keyedArg&&e.keyedArg.map((function(e){return t.visit([e])})),i=(r||a)&&[].concat(null!=r?r:[],null!=a?a:[]);return z({type:"function",name:n.image,params:i},n)},n.array=function(e){var t=this;return{type:"array",args:e.value&&e.value.map((function(e){return t.visit([e])}))}},n.keyedArg=function(e){var t=e.keyName[0],n=this.visit(e.value);return z({type:"keyValue",key:t.image,value:n},t)},n.value=function(e){return"image"in e.value[0]?e.value[0].image:this.visit(e.value)},n.enum=function(e){var t,n=e.enumName[0],r=null==(t=e.comment)||null==(t=t[0])?void 0:t.image;return z({type:"enumerator",name:n.image,comment:r},n)},t}(F.getBaseCstVisitorConstructorWithDefaults());function K(e){var t=_.tokenize(e);F.input=t.tokens;var n=F.schema();if(F.errors.length>0)throw F.errors[0];return(new W).visit(n)}var Q=["break","comment"],Z=["generator","datasource","model","view","enum","break","comment"];function H(e,t){void 0===t&&(t={});var r=t.sort,a=t.locales,i=void 0===a?void 0:a,u=t.sortOrder,o=void 0===u?void 0:u,s=e.list;if(void 0!==r&&r){s=e.list=s.filter((function(e){return"break"!==e.type}));var c=function(e,t,n){return void 0===n&&(n=Z),function(r,a){if(-1!==Q.indexOf(r.type)!=(-1!==Q.indexOf(a.type)))return e.list.indexOf(r)-e.list.indexOf(a);n!==Z&&(n=n.concat(Z));var i=n.indexOf(r.type)-n.indexOf(a.type);return 0!==i?i:"name"in r&&"name"in a?r.name.localeCompare(a.name,t):0}}(e,i,o);s.sort(c)}return s.map(J).filter(Boolean).join(n.EOL).replace(/(\r?\n\s*){3,}/g,n.EOL+n.EOL)+n.EOL}function J(e){switch(e.type){case"comment":return X(e);case"datasource":return r=ue((t=e).assignments),"\ndatasource "+t.name+" {\n  "+r+"\n}";case"enum":return function(e){var t=e.enumerators.map(ee).filter(Boolean).join(n.EOL+"  ").replace(/(\r?\n\s*){3,}/g,n.EOL+n.EOL+"  ");return"\nenum "+e.name+" {\n  "+t+"\n}"}(e);case"generator":return function(e){var t=ue(e.assignments);return"\ngenerator "+e.name+" {\n  "+t+"\n}"}(e);case"model":case"view":return function(e){var t,r,a,i,u,o=(r=0,a=(t=e.properties).reduce((function(e,t,n,a){return"break"===t.type||(n>0&&"break"===a[n-1].type&&(e[++r]=[]),e[r].push(t)),e}),[[]]),i=a.map((function(e){return e.reduce((function(e,t){return Math.max(e,"field"===t.type?t.name.length:0)}),0)})),u=a.map((function(e){return e.reduce((function(e,t){return Math.max(e,"field"===t.type?re(t).length:0)}),0)})),t.map((function(e,t,n){return t>0&&"break"!==e.type&&"break"===n[t-1].type&&(i.shift(),u.shift()),function(e,t,n){switch(void 0===t&&(t=0),void 0===n&&(n=0),e.type){case"attribute":return te(e);case"field":return function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var r=e.name.padEnd(t),a=re(e).padEnd(n),i=e.attributes?e.attributes.map(te):[],u=e.comment;return[r,a].concat(i).filter(Boolean).join(" ").trim()+(u?" "+u:"")}(e,t,n);case"comment":return X(e);case"break":return $();default:throw new Error("Unrecognized property type")}}(e,i[0],u[0])})).filter(Boolean).join(n.EOL+"  ").replace(/(\r?\n\s*){3,}/g,n.EOL+n.EOL+"  "));return"\n"+e.type+" "+e.name+" {\n  "+o+"\n}"}(e);case"break":return $();default:throw new Error("Unrecognized block type")}var t,r}function X(e){return e.text}function $(){return n.EOL}function ee(e){switch(e.type){case"enumerator":return[e.name,e.comment].filter(Boolean).join(" ");case"attribute":return te(e);case"comment":return X(e);case"break":return $();default:throw new Error("Unexpected enumerator type")}}function te(e){var t=e.args&&e.args.length>0?"("+e.args.map(ne).filter(Boolean).join(", ")+")":"",n=[e.name];return e.group&&n.unshift(e.group),("field"===e.kind?"@":"@@")+n.join(".")+t}function ne(e){return ie(e.value)}function re(e){var t=e.array?"[]":e.optional?"?":"";if("object"==typeof e.fieldType){if("function"===e.fieldType.type)return""+ae(e.fieldType)+t;throw new Error("Unexpected field type")}return""+e.fieldType+t}function ae(e){var t=e.params?e.params.map(ie):"";return e.name+"("+t+")"}function ie(e){if("object"==typeof e){if("type"in e)switch(e.type){case"keyValue":return e.key+": "+ie(e.value);case"function":return ae(e);case"array":return"["+(null!=e.args?e.args.map(ie).join(", "):"")+"]";default:throw new Error("Unexpected value type")}throw new Error("Unexpected object value")}return String(e)}function ue(e){var t=0,r=e.reduce((function(e,n,r,a){return"break"===n.type||(r>0&&"break"===a[r-1].type&&(e[++t]=[]),e[t].push(n)),e}),[[]]).map((function(e){return e.reduce((function(e,t){return Math.max(e,"assignment"===t.type?t.key.length:0)}),0)}));return e.map((function(e,t,n){return t>0&&"break"!==e.type&&"break"===n[t-1].type&&r.shift(),function(e,t){switch(void 0===t&&(t=0),e.type){case"comment":return X(e);case"break":return $();case"assignment":return e.key.padEnd(t)+" = "+ie(e.value);default:throw new Error("Unexpected assignment type")}}(e,r[0])})).filter(Boolean).join(n.EOL+"  ").replace(/(\r?\n\s*){3,}/g,n.EOL+n.EOL+"  ")}var oe=function(){function e(e){void 0===e&&(e=""),this.schema=void 0,this._subject=void 0,this._parent=void 0,this.schema=K(e)}var t=e.prototype;return t.print=function(e){return void 0===e&&(e={}),H(this.schema,e)},t.getSchema=function(){return this.schema},t.generator=function(e,t){void 0===t&&(t="prisma-client-js");var n=this.schema.list.reduce((function(t,n){return"generator"===n.type&&n.name===e?n:t}),{type:"generator",name:e,assignments:[{type:"assignment",key:"provider",value:'"'+t+'"'}]});return this.schema.list.includes(n)||this.schema.list.push(n),this._subject=n,this},t.drop=function(e){var t=this.schema.list.findIndex((function(t){return"name"in t&&t.name===e}));return-1!==t&&this.schema.list.splice(t,1),this},t.datasource=function(e,t){var n={type:"datasource",name:"db",assignments:[{type:"assignment",key:"url",value:"string"==typeof t?'"'+t+'"':{type:"function",name:"env",params:['"'+t.env+'"']}},{type:"assignment",key:"provider",value:e}]},r=this.schema.list.findIndex((function(e){return"datasource"===e.type}));return this.schema.list.splice(r,-1!==r?1:0,n),this._subject=n,this},t.model=function(e){var t=this.schema.list.reduce((function(t,n){return"model"===n.type&&n.name===e?n:t}),{type:"model",name:e,properties:[]});return this.schema.list.includes(t)||this.schema.list.push(t),this._subject=t,this},t.view=function(e){var t=this.schema.list.reduce((function(t,n){return"view"===n.type&&n.name===e?n:t}),{type:"view",name:e,properties:[]});return this.schema.list.includes(t)||this.schema.list.push(t),this._subject=t,this},t.enum=function(e,t){void 0===t&&(t=[]);var n=this.schema.list.reduce((function(t,n){return"enum"===n.type&&n.name===e?n:t}),{type:"enum",name:e,enumerators:t.map((function(e){return{type:"enumerator",name:e}}))});return this.schema.list.includes(n)||this.schema.list.push(n),this._subject=n,this},t.enumerator=function(e){var t=this.getSubject();if(!t||!("type"in t)||"enum"!==t.type)throw new Error("Subject must be a prisma enum!");return t.enumerators.push({type:"enumerator",name:e}),this},t.getSubject=function(){return this._subject},t.getParent=function(){return this._parent},t.blockAttribute=function(e,t){var n=this.getSubject();if(!G(n)){var r=this.getParent();if(!G(r))throw new Error("Subject must be a prisma model or view!");n=this._subject=r}var a=t?"string"==typeof t?[{type:"attributeArgument",value:'"'+t+'"'}]:Array.isArray(t)?[{type:"attributeArgument",value:{type:"array",args:t}}]:Object.entries(t).map((function(e){return{type:"attributeArgument",value:{type:"keyValue",key:e[0],value:e[1]}}})):[];return n.properties.push({type:"attribute",kind:"object",name:e,args:a}),this},t.attribute=function(e,t){var n=this.getParent(),r=this.getSubject();if(!G(n))throw new Error("Parent must be a prisma model or view!");if(!Y(r))throw new Error("Subject must be a prisma field!");r.attributes||(r.attributes=[]);var a=r.attributes.reduce((function(t,n){return"attribute"===n.type&&(n.group?n.group+".":"")+n.name===e?n:t}),{type:"attribute",kind:"field",name:e});if(Array.isArray(t)){var i=function e(t){var n,r;return"string"==typeof t?t:{type:"function",name:t.name,params:null!=(n=null==(r=t.function)?void 0:r.map(e))?n:[]}};t.length>0&&(a.args=t.map((function(e){return{type:"attributeArgument",value:i(e)}})))}else"object"==typeof t&&(a.args=Object.entries(t).map((function(e){return{type:"attributeArgument",value:{type:"keyValue",key:e[0],value:{type:"array",args:e[1]}}}})));return r.attributes.includes(a)||r.attributes.push(a),this},t.removeAttribute=function(e){var t=this.getParent(),n=this.getSubject();if(!G(t))throw new Error("Parent must be a prisma model or view!");if(!Y(n))throw new Error("Subject must be a prisma field!");return n.attributes||(n.attributes=[]),n.attributes=n.attributes.filter((function(t){return!("attribute"===t.type&&t.name===e)})),this},t.assignment=function(e,t){var n=this.getSubject();if(!n||!("type"in n)||!["generator","datasource"].includes(n.type))throw new Error("Subject must be a prisma generator or datasource!");var r=n.assignments.reduce((function(n,r){return"assignment"===r.type&&r.key===e?function(e,n){return e.value='"'+t+'"',e}(r):n}),{type:"assignment",key:e,value:'"'+t+'"'});return n.assignments.includes(r)||n.assignments.push(r),this},t.blockInsert=function(e){var t=this.getSubject(),n=["datasource","enum","generator","model","view"];if(!t||!("type"in t)||!n.includes(t.type)){var r=this.getParent();if(!r||!("type"in r)||!n.includes(r.type))throw new Error("Subject must be a prisma block!");t=this._subject=r}switch(t.type){case"datasource":case"generator":t.assignments.push(e);break;case"enum":t.enumerators.push(e);break;case"model":t.properties.push(e)}return this},t.break=function(){return this.blockInsert({type:"break"})},t.comment=function(e,t){return void 0===t&&(t=!1),this.blockInsert({type:"comment",text:"//"+(t?"/":"")+" "+e})},t.schemaComment=function(e,t){return void 0===t&&(t=!1),this.schema.list.push({type:"comment",text:"//"+(t?"/":"")+" "+e}),this},t.field=function(e,t){void 0===t&&(t="String");var n=this.getSubject();if(!G(n)){var r=this.getParent();if(!G(r))throw new Error("Subject must be a prisma model or view!");n=this._subject=r}var a=n.properties.reduce((function(t,n){return"field"===n.type&&n.name===e?n:t}),{type:"field",name:e,fieldType:t});return n.properties.includes(a)||n.properties.push(a),this._parent=n,this._subject=a,this},t.removeField=function(e){var t=this.getSubject();if(!G(t)){var n=this.getParent();if(!G(n))throw new Error("Subject must be a prisma model or view!");t=this._subject=n}return t.properties=t.properties.filter((function(t){return!("field"===t.type&&t.name===e)})),this},t.then=function(e){return e(this._subject),this},e}();exports.ConcretePrismaSchemaBuilder=oe,exports.createPrismaSchemaBuilder=function(e){return new oe(e)},exports.getSchema=K,exports.printSchema=H;
//# sourceMappingURL=prisma-ast.cjs.production.min.js.map
